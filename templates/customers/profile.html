{% extends 'dashboard_base.html' %}
{% block dashboard_content %}
<div class="w-full">
    <div class="flex flex-col md:flex-row items-center gap-6 mb-8 px-2 md:px-8">
        <div class="flex-shrink-0">
            <div class="w-24 h-24 bg-gradient-to-br from-purple-500 to-purple-600 rounded-full flex items-center justify-center text-white text-4xl font-bold overflow-hidden">
                {% if request.user.profile_image %}
                    <img src="{{ request.user.profile_image.url }}" alt="Photo de profil" class="w-full h-full object-cover rounded-full" />
                {% else %}
                    {{ request.user.first_name.0|default:request.user.username.0|upper }}
                {% endif %}
            </div>
        </div>
        <div class="flex-1">
            <h1 class="text-3xl font-bold text-slate-900 mb-1">{{ request.user.get_full_name|default:request.user.username }}</h1>
            <div class="text-slate-500 text-lg mb-1">{{ request.user.email }}</div>
            <div class="inline-block px-3 py-1 rounded-full bg-blue-100 text-blue-700 text-sm font-semibold capitalize">{{ request.user.get_role_display }}</div>
        </div>
    </div>
    <form method="post" enctype="multipart/form-data" class="bg-white rounded-xl shadow p-8 w-full space-y-6">
            {% csrf_token %}
            {{ form.non_field_errors }}
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <label class="block text-slate-800 font-bold mb-2 text-lg">Nom d'utilisateur</label>
                    <input type="text" name="username" value="{{ form.username.value }}" class="input input-bordered w-full text-lg px-5 py-3 bg-slate-50 border-2 border-slate-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 rounded-lg transition placeholder-slate-400 shadow-sm focus:shadow-lg cursor-text" id="id_username" required placeholder="Nom d'utilisateur" />
                    <div class="text-red-600 text-sm mt-1">{{ form.username.errors }}</div>
                </div>
                <div>
                    <label class="block text-slate-800 font-bold mb-2 text-lg">Email</label>
                    <input type="email" name="email" value="{{ form.email.value }}" class="input input-bordered w-full text-lg px-5 py-3 bg-slate-50 border-2 border-slate-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 rounded-lg transition placeholder-slate-400 shadow-sm focus:shadow-lg cursor-text" id="id_email" required placeholder="Adresse email" />
                    <div class="text-red-600 text-sm mt-1">{{ form.email.errors }}</div>
                </div>
                <div>
                    <label class="block text-slate-800 font-bold mb-2 text-lg">Téléphone</label>
                    <input type="text" name="phone" value="{{ form.phone.value }}" class="input input-bordered w-full text-lg px-5 py-3 bg-slate-50 border-2 border-slate-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 rounded-lg transition placeholder-slate-400 shadow-sm focus:shadow-lg cursor-text" id="id_phone" placeholder="Téléphone" />
                    <div class="text-red-600 text-sm mt-1">{{ form.phone.errors }}</div>
                </div>
                <div>
                    <label class="block text-slate-800 font-bold mb-2 text-lg">Adresse</label>
                    <input type="text" name="address" value="{{ form.address.value }}" class="input input-bordered w-full text-lg px-5 py-3 bg-slate-50 border-2 border-slate-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 rounded-lg transition placeholder-slate-400 shadow-sm focus:shadow-lg cursor-text" id="id_address" placeholder="Adresse" />
                    <div class="text-red-600 text-sm mt-1">{{ form.address.errors }}</div>
                </div>
                <div class="md:col-span-2">
                    <label class="block text-slate-800 font-bold mb-2 text-lg">Photo de profil</label>
                    <input type="file" name="profile_image" accept="image/*" class="block w-full text-lg text-slate-700 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" />
                </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <label class="block text-slate-800 font-bold mb-2 text-lg">Nouveau mot de passe</label>
                    <input type="password" name="password1" class="input input-bordered w-full text-lg px-5 py-3 bg-slate-50 border-2 border-slate-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 rounded-lg transition placeholder-slate-400 shadow-sm focus:shadow-lg cursor-text" id="id_password1" placeholder="Nouveau mot de passe" />
                    <div class="text-red-600 text-sm mt-1">{{ form.password1.errors }}</div>
                </div>
                <div>
                    <label class="block text-slate-800 font-bold mb-2 text-lg">Confirmer le mot de passe</label>
                    <input type="password" name="password2" class="input input-bordered w-full text-lg px-5 py-3 bg-slate-50 border-2 border-slate-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 rounded-lg transition placeholder-slate-400 shadow-sm focus:shadow-lg cursor-text" id="id_password2" placeholder="Confirmer le mot de passe" />
                    <div class="text-red-600 text-sm mt-1">{{ form.password2.errors }}</div>
                </div>
            </div>
            <div class="mt-6 flex justify-end">
                <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2 rounded-lg shadow">Enregistrer les modifications</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
